\section{Fase de Elaboración} \label{sec:faseElaboracion}

En esta fase intervienen la Captura de Requisitos, Análisis, Diseño, Implementación y Pruebas, con mayor o menor influencia, según la iteración donde nos encontremos (ver Figura \ref{fig:pudElaboracion}). 

\imagenBorde{Cap5//pudElaboracion}{1.0}{Fase de elaboración en el PUD}{fig:pudElaboracion}

Esta fase se ha divido en dos iteraciones: la primera de ellas se centra de nuevo en la captura de requisitos, en el análisis y en algunas tareas de diseño, como la definición de la arquitectura del sistema. La segunda iteración se centra en tareas de diseño y de implementación, principalmente de la comunicación de los subsistemas en una arquitectura cliente-servidor.


\subsection{Iteración 1}

En esta iteración se abordan las siguientes tareas: 

\begin{itemize}
	\item Identificación de nuevos requisitos funcionales.
	\item Elaboración del modelo de casos de uso definitivo.
	\item Elaboración del plan de proyecto definitivo. 
	\item Análisis de los casos de uso que componen el sistema.
	\item Definición de la arquitectura del sistema.
\end{itemize}

\subsubsection{Identificación de requisitos}

Al terminar la iteración de la fase anterior, obteniendo un primer modelo de casos de uso con los requisitos identificados, se llevó a cabo una reunión de seguimiento, para revisar la planificación realizada en el plan de proyecto y poder identificar nuevos requisitos funcionales, si los hubiera.

Como resultado de esta reunión, se identificaron nuevos requisitos para añadir al sistema, y que servirán para mitigar o resolver más problemas que aparecen al aplicar el paradigma de GSD. Estos nuevos requisitos fueron:

\begin{itemize}
	\item Además de poder mostrar las decisiones tomadas en un proyecto, se debe poder cambiar el estado de éstas, aceptando o rechazando dichas decisiones, para posteriormente, cuando el proyecto llegue a su fin, poder conocer qué notificaciones fueron de ayuda y cuáles no. 
	\item Para aumentar la información que se añade al crear nuevas decisiones de un proyecto, se debe poder adjuntar ficheros a dichas decisiones. Del mismo modo, se deben poder descargar esos archivos adjuntos, si los hubiera.
	\item Se deben poder generar de manera automática estadísticas que ayuden a llevar un control sobre los proyectos que se están desarrollando por los diferentes centros de desarrollo software de una compañía. También, se podrán generar estadísticas acerca de los miembros de los equipos.
	\item Se deben poder generar informes de las decisiones tomadas en un proyecto, en forma de tabla y de manera automática. Dicho informe debe generarse como un documento PDF.
\end{itemize}

Con estos nuevos requisitos, se actualizan los grupos funcionales creados en la fase de inicio, las acciones que pueden realizar los diferentes roles de usuarios y el modelo de casos de uso de alto nivel, explicado en el siguiente apartado.

En la Tabla \ref{table:categorias2} se muestran los nuevos grupos funcionales actualizados, incluyendo los nuevos requisitos que se han identificado en esta fase.

\begin{table}[!htbp]%
\centering
\begin{tabular}{| >{\centering\arraybackslash}m{6cm} | >{\arraybackslash}m{6cm} | >{\centering\arraybackslash}m{2cm} |}
	\hline
		\multicolumn{1}{|c|}{\colorCabecera\textbf{Funcionalidad}} &
			\multicolumn{1}{|c|}{\colorCabecera\textbf{Descomposición de requisitos}} &
			\multicolumn{1}{|c|}{\colorCabecera\textbf{Id. Requisito}} \\
	\hline
		 \multirow{1}{*}{\colorCelda \textbf{F1:} Acceso Sistema} & 
		 Login (acceso) & \textbf{F1.1} \\ \cline{2-3}
		 \colorCelda & Logout (desconexión) & \textbf{F1.2} \\
	\hline
		 \colorCelda & Crear decisión & \textbf{F2.1} \\ \cline{2-3}
		 \colorCelda & Modificar decisión & \textbf{F2.2} \\ \cline{2-3}
		 \multirow{1}{*}{\colorCelda \textbf{F2:} Gestión Decisiones} & Eliminar decisión & \textbf{F2.3} \\ \cline{2-3}
		 \colorCelda & Adjuntar ficheros & \textbf{F2.4} \\ \cline{2-3}
		 \colorCelda & Aceptar o rechazar decisiones & \textbf{F2.5} \\
	\hline
		\colorCelda & Visualizar decisiones & \textbf{F3.1} \\ \cline{2-3}
		 \multirow{1}{*}{\colorCelda \textbf{F3:} Visualización información} & Visualizar compañía & \textbf{F3.2} \\ \cline{2-3}
		 \colorCelda & Descargar ficheros adjuntos & \textbf{F3.3} \\
	\hline
		 \colorCelda &  Consultar notificaciones & \textbf{F4.1} \\ \cline{2-3}
		 \multirow{1}{*}{\colorCelda \textbf{F4:} Gestión Notificaciones}  & Modificar notificación & \textbf{F4.2} \\ \cline{2-3}
		 \colorCelda & Eliminar notificación & \textbf{F4.3} \\
	\hline
		\colorCelda &  Dar de alta un proyecto & \textbf{F5.1} \\ \cline{2-3}
		 \colorCelda & Modificar datos proyecto  & \textbf{F5.2} \\ \cline{2-3}
		 \multirow{1}{*}{\colorCelda \textbf{F5:} Gestión Proyectos} & Consultar usuarios & \textbf{F5.3} \\ \cline{2-3}
		 \colorCelda & Seleccionar proyecto activo & \textbf{F5.4} \\ \cline{2-3}
		 \colorCelda & Aconsejar decisiones de proyectos & \textbf{F5.5} \\ 
	\hline
		\multicolumn{1}{|c|}{\colorCelda \textbf{F6:} Generación informes} & 
		Exportar información & \textbf{F6.1} \\
		\hline
			\multicolumn{1}{|c|}{\colorCelda \textbf{F7:} Generación estadísticas} & 
		Generación gráficos estadísticos & \textbf{F7.1} \\
		\hline
	\multicolumn{1}{|c|}{\colorCelda \textbf{F8:} Gestión Idiomas} & 
		 Consultar idiomas & \textbf{F8.1} \\ \cline{2-3}
	\hline
		\multicolumn{1}{|c|}{\colorCelda \textbf{F9:} Exportar información} & 
		Exportar información & \textbf{F9.1} \\
		\hline
\end{tabular}
\caption{Grupos funcionales del sistema - v2.0}
\label{table:categorias2}
\end{table}


Por otra parte, en la Tabla \ref{table:acciones2} se muestran las acciones que se pueden realizar en el sistema según el rol del usuario.

\begin{table}[!htbp]%
\centering
\begin{tabular}{| >{\centering\arraybackslash}m{3cm} | >{\centering\arraybackslash}m{4cm} | >{\centering\arraybackslash}m{3cm} |}
	\hline
		\multicolumn{1}{|c|}{\colorCabecera\textbf{Requisito}} &
			\multicolumn{1}{|c|}{\colorCabecera\textbf{Empleado}} &
			\multicolumn{1}{|c|}{\colorCabecera\textbf{Jefe Proyecto}} \\
	\hline
		 \textbf{F1.1} & \ding{'063} & \ding{'063} \\
		 \hline
		 \textbf{F1.2} & \ding{'063} & \ding{'063} \\
		 \hline
		 \textbf{F2.1} & \ding{'063} (excepto \textit{Temas}) & \ding{'063} \\
		 \hline
		 \textbf{F2.2} & \ding{'063} (excepto \textit{Temas}) & \ding{'063} \\
		 \hline
		 \textbf{F2.3} & \ding{'063} (excepto \textit{Temas}) & \ding{'063} \\
		 \hline
		 \textbf{F2.4} & \ding{'063} & \ding{'063} \\
		 \hline
		 \textbf{F2.5} & & \ding{'063} \\
		 \hline
		 \textbf{F3.1} & \ding{'063} & \ding{'063} \\
		 \hline
		 \textbf{F3.2} & \ding{'063} & \ding{'063} \\
		 \hline
		 \textbf{F3.3} & \ding{'063} & \ding{'063} \\
		 \hline
		 \textbf{F4.1} & \ding{'063} & \ding{'063} \\
		 \hline
		 \textbf{F4.2} & \ding{'063} & \ding{'063} \\
		 \hline
		 \textbf{F4.3} & \ding{'063} & \ding{'063} \\
		 \hline
		 \textbf{F5.1} &  & \ding{'063} \\
		 \hline
		 \textbf{F5.2} &  & \ding{'063} \\
		 \hline
		 \textbf{F5.3}& \ding{'063} & \ding{'063} \\
		 \hline
		 \textbf{F5.4} & \ding{'063} & \ding{'063} \\
		 \hline
		 \textbf{F5.5} & & \ding{'063} \\
		 \hline
		 \textbf{F6.1} & & \ding{'063} \\
		 \hline
		 \textbf{F7.1} &  & \ding{'063} \\
		 \hline
		 \textbf{F8.1} & \ding{'063} & \ding{'063} \\
		 \hline
		 \textbf{F9.1} &  & \ding{'063} \\
		 \hline
\end{tabular}
\caption{Acciones que un usuario puede realizar en el sistema - v2.0}
\label{table:acciones2}
\end{table}

\subsubsection{Modelo de casos de uso}

En la Figura \ref{fig:casos2Cliente} se muestra el diagrama de casos de uso que representa los grupos funcionales actualizados en el subsistema cliente. Del mismo modo, la Figura \ref{fig:casos2Server} refleja el diagrama de casos de uso de alto nivel actualizado del subsistema servidor.

\imagen{Cap5/Cliente2/casos2Cliente}{2.0}{Diagrama de casos de uso - Cliente - v2.0}{fig:casos2Cliente}

\imagen{Cap5/Server2/casos2Server}{2.1}{Diagrama de casos de uso - Servidor - v2.0}{fig:casos2Server}


Una vez identificados y modelados los nuevos requisitos, obteniendo los diagramas de casos de uso de alto nivel actualizados, se profundiza y aumenta el detalle en los diagramas de casos de uso, representando, para cada grupo funcional del sistema, el conjunto de casos de uso que modelan los requisitos que se engloban en dicho grupo, como se ha detallado en la Tabla \ref{table:categorias2}. Por tanto, en en las secciones posteriores, se muestran estos diagramas de casos de uso detallados para cada grupo funcional, formando diferentes vistas del sistema global.


\paragraph{Acceso al sistema}

En la Figura \ref{fig:CduAccesoSistema2Cliente} se muestra el diagrama de casos de uso para el cliente, mientras que en la Figura \ref{fig:CduAccesoSistema2Server} se muestra el diagrama de casos de uso para el servidor.

\imagen{Cap5/Cliente2//CduAccesoSistema}{2.5}{Diagrama de casos de uso - Cliente - Acceso al sistema}{fig:CduAccesoSistema2Cliente}

\imagen{Cap5/Server2//CduAccesoSistema}{2.4}{Diagrama de casos de uso - Servidor - Acceso al sistema}{fig:CduAccesoSistema2Server}


\paragraph{Gestión de decisiones}

En la Figura \ref{fig:CduGestionDecisiones2Cliente} se muestra el diagrama de casos de uso para el cliente, mientras que en Figura \ref{fig:CduGestionDecisiones2Server} refleja el diagrama de casos de uso para el servidor.

\imagen{Cap5/Cliente2//CduGestionDecisiones}{1.8}{Diagrama de casos de uso - Cliente - Gestión decisiones}{fig:CduGestionDecisiones2Cliente}

\imagen{Cap5/Server2//CduGestionDecisiones}{2.1}{Diagrama de casos de uso - Servidor - Gestión decisiones}{fig:CduGestionDecisiones2Server}


\paragraph{Visualización de información}

En la Figura \ref{fig:CduVisualizarDecisiones2Cliente} se muestra el diagrama de casos de uso para el cliente, mientras que en la Figura \ref{fig:CduVisualizarDecisiones2Server} se observa el diagrama de casos de uso para el servidor.

\imagen{Cap5/Cliente2//CduVisualizarDecisiones}{2.3}{Diagrama de casos de uso - Cliente - Visualización información}{fig:CduVisualizarDecisiones2Cliente}

\imagen{Cap5/Server2//CduVisualizarDecisiones}{2.1}{Diagrama de casos de uso - Servidor - Visualización información}{fig:CduVisualizarDecisiones2Server}


\paragraph{Gestión de notificaciones}

En la Figura \ref{fig:CduGestionNotificaciones2Cliente} se muestra el diagrama de casos de uso para el cliente, mientras que la Figura \ref{fig:CduGestionNotificaciones2Server} refleja el diagrama de casos de uso para el servidor.

\imagen{Cap5/Cliente2//CduGestionNotificaciones}{2.6}{Diagrama de casos de uso - Cliente - Gestión notificaciones}{fig:CduGestionNotificaciones2Cliente}

\imagen{Cap5/Server2//CduGestionNotificaciones}{2.3}{Diagrama de casos de uso - Servidor - Gestión notificaciones}{fig:CduGestionNotificaciones2Server}


\paragraph{Gestión de proyectos}

En la Figura \ref{fig:CduGestionProyectos2Cliente} se muestra el diagrama de casos de uso para el cliente, mientras que la Figura \ref{fig:CduGestionProyectos2Server} refleja el diagrama de casos de uso para el servidor.

\imagen{Cap5/Cliente2//CduGestionProyectos}{2.3}{Diagrama de casos de uso - Cliente - Gestión Proyectos}{fig:CduGestionProyectos2Cliente}

\imagen{Cap5/Server2//CduGestionProyectos}{2.2}{Diagrama de casos de uso - Servidor - Gestión Proyectos}{fig:CduGestionProyectos2Server}


\paragraph{Generación de estadísticas}

En la Figura \ref{fig:CduGeneracionEstadisticas2Cliente} se muestra el diagrama de casos de uso para el cliente.

Esta funcionalidad es exclusiva del subsistema cliente, ya que, utilizando los datos que proporciona el servidor, las gráficas se generan y muestran en el cliente, debido a que los tipos de gráficas son independientes del servidor y dependen de la tecnología utilizada para representarlas gráficamente en el cliente.

\imagen{Cap5/Cliente2//CduGeneracionEstadisticas}{2.4}{Diagrama de casos de uso - Cliente - Generación Estadísticas}{fig:CduGeneracionEstadisticas2Cliente}


\paragraph{Generación de informes}

En la Figura \ref{fig:CduGeneracionInformes2Cliente} se muestra el diagrama de casos de uso para el cliente, mientras que en la Figura \ref{fig:CduGeneracionInformes2Server} se muestra el diagrama de casos de uso para el servidor.

\imagen{Cap5/Cliente2//CduGeneracionInformes}{2.4}{Diagrama de casos de uso - Cliente - Generación Informes}{fig:CduGeneracionInformes2Cliente}

\imagen{Cap5/Server2//CduGeneracionInformes}{2.4}{Diagrama de casos de uso - Servidor - Generación Informes}{fig:CduGeneracionInformes2Server}


\paragraph{Gestión de idiomas}

En la Figura \ref{fig:CduGestionIdiomas2Cliente} se muestra el diagrama de casos de uso para el cliente.

\imagen{Cap5/Cliente2//CduGestionIdiomas}{2.5}{Diagrama de casos de uso - Cliente - Gestión Idiomas}{fig:CduGestionIdiomas2Cliente}


\paragraph{Exportar información}

En la Figura \ref{fig:CduExportarConocimiento2Cliente} se muestra el diagrama de casos de uso para el cliente, mientras que en la Figura \ref{fig:CduExportarConocimiento2Server} se muestra el diagrama de casos de uso para el servidor.

\imagen{Cap5/Cliente2//CduExportarConocimiento}{2.4}{Diagrama de casos de uso - Cliente - Exportar información}{fig:CduExportarConocimiento2Cliente}


\imagen{Cap5/Server2//CduExportarConocimiento}{2.4}{Diagrama de casos de uso - Servidor - Exportar información}{fig:CduExportarConocimiento2Server}


\subsubsection{Plan de iteraciones}

Una vez identificados nuevos requisitos, se reorganiza el plan de proyecto con nuevas iteraciones, para poder tener en cuenta el desarrollo de los nuevos grupos funcionales identificados. Por tanto, a partir de las iteraciones planificadas en la Tabla \ref{table:iteraciones1}, se obtiene el plan de iteraciones definitivo mostrado en la Tabla \ref{table:iteraciones2}.

\begin{table}
\centering
\begin{tabular}[!htbp]%
{| >{\centering\arraybackslash}m{3cm} | >{\centering\arraybackslash}m{1.9cm} | >{\arraybackslash}m{9.2cm} |}
	\hline
		\multicolumn{1}{|c|}{\colorCabecera\textbf{Fase}} &
			\multicolumn{1}{|c|}{\colorCabecera\textbf{Iteración}} &
		\multicolumn{1}{|c|}{\colorCabecera\textbf{Objetivos}} \\
	\hline
	\multicolumn{1}{|c|}{\colorCelda Inicio} & Preliminar &
		 Realizar un estudio del sistema a desarrollar, capturando e identificando sus requisitos funcionales. \\
	\hline
	 \colorCelda & 1 &
		 Validar el estudio del sistema e identificar posibles nuevos requisitos, modelando los requisitos del sistema con mayor detalle y realizando las tareas de análisis del sistema y definición de su arquitectura. \\
	\cline{2-3}
		 \multirow{1}{*}{\colorCelda Elaboración} & 2 & 
		 Realizar tareas de diseño de alto nivel del sistema, como el diagrama de clases de dominio, y diseñar e implementar la comunicación entre sistemas en la arquitectura cliente-servidor definida.\\
		 \hline
	\colorCelda & 3 &
		 Diseño, implementación y pruebas de los casos de uso del grupo funcional \textbf{F1}. \\
	\cline{2-3}
	\colorCelda & 4 &
		 Diseño, implementación y pruebas de los casos de uso del grupo funcional \textbf{F3}. \\
	\cline{2-3}
	\multirow{1}{*}{\colorCelda Construcción} & 5 &
		 Diseño, implementación y pruebas de los casos de uso del grupo funcional \textbf{F2} y \textbf{F4} \\
	\cline{2-3}
	\colorCelda & 6 &
		 Diseño, implementación y pruebas de los casos de uso del grupo funcional \textbf{F5}. \\
	\cline{2-3}
	\colorCelda & 7 &
		 Diseño, implementación y pruebas de los casos de uso del grupo funcional \textbf{F6} y \textbf{F7}. \\
	\cline{2-3}
		\colorCelda & 8 &
		 Diseño, implementación y pruebas de los casos de uso del grupo funcional \textbf{F8} y \textbf{F9}. \\
	\hline	
	\multicolumn{1}{|c|}{\colorCelda Transición} & 9 &
		 Obtener la versión entregable del sistema, así como su documentación y manuales de usuario. \\
	\hline
\end{tabular}
\caption{Primera versión del plan de iteraciones}
\label{table:iteraciones1} 
\end{table}

Los nuevos requisitos identificados en esta iteración sólo afectan, con respecto al plan de proyecto inicial, a las iteraciones de la fase de Construcción. Por tanto, gracias al carácter iterativo del PUD, se han podido identificar e incluir nuevos requisitos al desarrollo del sistema, sin verse afectadas ninguna de las iteraciones anteriores y habiéndose detectado estos requisitos aún en fases tempranas del ciclo de vida del desarrollo, por lo que tampoco se pone en riesgo la viabilidad del proyecto debido a estos nuevos cambios.


%% DESGLOSAR ITERACIONES


A partir de este punto, se siguen las iteraciones planificadas en este plan de iteraciones definitivo.


\subsubsection{Análisis de casos de uso} \label{sec:analisis}

Los casos de uso de cada grupo funcional obtenidos anteriormente se especifican de manera más formal, describiendo los escenarios de funcionamiento de cada uno de ellos. Además, para cada caso de uso, se crea el diagrama de clases de análisis, donde se representan los objetos  de dominio involucrados en el caso de uso, así como las clases encargadas de su control.

Existen tres tipos de clases en un diagrama de clases de análisis: 

\begin{enumerate}
	\item \textbf{Interfaz o \textit{Boundary}}: representa clases utilizadas para la comunicación entre el actor y el sistema.
	\item \textbf{Control}: representa clases y objetos de control. Es la que controla y coordina el flujo (o escenario) de funcionamiento del caso de uso.
	\item \textbf{Entidad o \textit{Entity}}: son clases que representan objetos de información persistentes del sistema.
\end{enumerate}

Señalar que, para cada caso de uso, se describe su funcionamiento y sus flujos desde un punto de vista global al sistema, sin entrar en detalle en cada subsistema, ya que lo que interesa es describir a alto nivel su funcionamiento. Posteriormente, con los diagramas de clases de análisis, de secuencia y de clases de diseño, se irá profundizando más en detalle en el flujo que se sigue en cada subsistema.

Como se comentó al inicio de este capítulo, para no excederse en la longitud de este capítulo, y por tanto de todo el presente documento, se incluyen las especificaciones y diagramas de análisis de algunos de los casos de uso que componen el sistema.

\paragraph{Grupo Funcional F1: \textit{Acceso al sistema}}

\subparagraph{Login}

En la Tabla \ref{table:flujosLogin} se describe el caso de uso \textit{Login}.

\begin{table}[!htbp]%
\centering
\begin{tabular}{| >{\arraybackslash}m{15cm} |}
	\hline
	\textbf{Nombre}: Iniciar sesión (Login) \\
	\hline
	\textbf{Descripción}: Funcionalidad para que un usuario pueda acceder al sistema \\
	\hline
	\textbf{Precondiciones}: Disponer de nombre de usuario y contraseña y estar dado de alta en al menos un proyecto \\
	\hline
	\textbf{Post-condiciones}: El usuario accede al sistema \\
	\hline 
	\textbf{Flujo principal}:
	\vspace{-4mm}
	\begin{enumerate}
	\setlength{\itemsep}{-7.5pt}
	\setlength{\parsep}{-7.5pt}
	\setlength{\partopsep}{\itemsep}
	\setlength{\topsep}{0pt}
	\item El usuario introduce usuario y contraseña.
	\item Se valida el usuario y contraseña.
	\item Se crea una sesión para el usuario.
	\item Se muestran los proyectos en los que el usuario está dado de alta.
	\item El usuario elige uno de los proyectos.
	\item El usuario accede al sistema para trabajar sobre ese proyecto.
	\vspace{-6mm}
	\end{enumerate} 
	\\	
	\hline
	\textbf{Flujo alternativo 1: error de Login}:
	\begin{enumerate}
	\vspace{-4mm}
	\setlength{\itemsep}{-7.5pt}
	\setlength{\parsep}{\itemsep}
	\setlength{\partopsep}{\itemsep}
	\setlength{\topsep}{-7.5pt}
	\item El usuario introduce usuario y contraseña.
	\item Se valida el usuario y contraseña.
	\item El usuario no es válido. Se informa del error y se vuelve al comienzo.
	\vspace{-6mm}
	\end{enumerate}
	\\	
	\hline
	\textbf{Flujo alternativo 2: usuario inexistente}:
	\begin{enumerate}
	\vspace{-4mm}
	\setlength{\itemsep}{-7.5pt}
	\setlength{\parsep}{\itemsep}
	\setlength{\partopsep}{\itemsep}
	\setlength{\topsep}{-7.5pt}
	\item El usuario introduce usuario y contraseña.
	\item Se valida el usuario y contraseña.
	\item El usuario no existe. Se informa del error y se vuelve al comienzo.
	\vspace{-6mm}
	\end{enumerate}
	\\
	\hline
	\textbf{Flujo alternativo 3: usuario ya logueado}:
	\begin{enumerate}
	\vspace{-4mm}
	\setlength{\itemsep}{-7.5pt}
	\setlength{\parsep}{\itemsep}
	\setlength{\partopsep}{\itemsep}
	\setlength{\topsep}{-7.5pt}
	\item El usuario introduce usuario y contraseña.
	\item Se valida el usuario y contraseña.
	\item Ya existe una sesión para ese usuario. Se cierra dicha sesión y se crea una nueva.
	\item Se muestran los proyectos en los que el usuario está dado de alta.
	\item El usuario elige uno de los proyectos.
	\item El usuario accede al sistema para trabajar sobre ese proyecto.
	\vspace{-6mm}
	\end{enumerate}
	\\
	\hline
	\textbf{Flujo alternativo 4: no existen proyectos}:
	\begin{enumerate}
	\vspace{-4mm}
	\setlength{\itemsep}{-7.5pt}
	\setlength{\parsep}{-7.5pt}
	\setlength{\partopsep}{\itemsep}
	\setlength{\topsep}{0pt}
	\item El usuario introduce usuario y contraseña.
	\item Se valida el usuario y contraseña.
	\item Se crea una sesión para el usuario.
	\item Se consultan los proyectos en los que el usuario está dado de alta.
	\item El usuario no tiene ningún proyecto. Se informa del error y se vuelve al comienzo.
	\vspace{-6mm}
	\end{enumerate}
	\\
	\hline 
\end{tabular}
\caption{Especificación del caso de uso \textit{Login}}
\label{table:flujosLogin}
\end{table}

En la Figura \ref{fig:analisisLoginCliente} se muestra el diagrama de clases de análisis para el subsistema cliente. La Figura \ref{fig:analisisLoginServer} refleja el diagrama de clases de análisis para el subsistema servidor.

\imagen{Cap5/Cliente2//analisisLoginCliente}{2.2}{Diagrama de clases de análisis - Cliente - Login}{fig:analisisLoginCliente}

\imagen{Cap5/Server2//analisisLoginServer}{2.2}{Diagrama de clases de análisis - Servidor - Login}{fig:analisisLoginServer}



\paragraph{Grupo Funcional F2: \textit{Gestión decisiones}} \label{sec:modificarDecisionAnalisis}

\subparagraph{Modificar decisión} 

Este es un caso de uso abstracto del que heredan otros tres casos específicos, según el tipo de decisión que se desee modificar (ver Figura \ref{fig:CduGestionDecisiones2Server}). Se ha utilizado la herencia porque los tres casos de uso comparten características en común, como es la introducción de los datos del título y la descripción de la decisión a modificar por parte del usuario. 

En la Tabla \ref{table:flujosEditPropuesta} se describe el caso de uso \textit{Modificar Decisión - Modificar Propuesta}. 

\begin{table}[!htbp]%
\centering
\begin{tabular}{| >{\arraybackslash}m{15cm} |}
	\hline
	\textbf{Nombre}: Modificar Decisión - Modificar Propuesta (\textit{Proposal}) \\
	\hline
	\textbf{Descripción}: Funcionalidad para modificar una nueva Propuesta en un proyecto. 	\\
	\hline
	\textbf{Precondiciones}: Que el usuario haya accedido al sistema, tenga permisos para realizar la operación y sea autor de la Propuesta. \\
	\hline
	\textbf{Post-condiciones}: Se modifica la Propuesta. \\
	\hline 
	\textbf{Flujo principal}:
	\begin{enumerate}
	\vspace{-4mm}
	\setlength{\itemsep}{-7.5pt}
	\setlength{\parsep}{\itemsep}
	\setlength{\partopsep}{\itemsep}
	\setlength{\topsep}{-7.5pt}
	\item El usuario selecciona una Propuesta de un Tema.
	\item El usuario introduce el nuevo título y descripción de la Propuesta.
	\item El usuario introduce otros datos específicos para este tipo de decisión.
	\item El sistema valida los datos introducidos.
	\item Se modifica la Propuesta para el Tema seleccionado.
	\item El sistema crea una notificación para los usuarios dados de alta en el proyecto.
	\item Se refrescan y actualizan las decisiones, para reflejar visualmente el cambio.
	\vspace{-4mm}
	\end{enumerate}
	\\
	\hline
	\textbf{Flujo alternativo 1: datos incompletos}:
	\begin{enumerate}
	\vspace{-4mm}
	\setlength{\itemsep}{-7.5pt}
	\setlength{\parsep}{\itemsep}
	\setlength{\partopsep}{\itemsep}
	\setlength{\topsep}{-7.5pt}
	\item El usuario selecciona una Propuesta de un Tema.
	\item El usuario introduce el nuevo título y descripción de la Propuesta.
	\item El usuario introduce otros datos específicos para este tipo de decisión.
	\item El sistema valida los datos introducidos.
	\item Los datos son incompletos. Se muestra un mensaje y se vuelven a solicitar los datos de la Propuesta.
	\vspace{-4mm}
	\end{enumerate}	
	\\
	\hline
	\textbf{Flujo alternativo 2: Propuesta ya existente}:
	\begin{enumerate}
	\vspace{-4mm}
	\setlength{\itemsep}{-7.5pt}
	\setlength{\parsep}{\itemsep}
	\setlength{\partopsep}{\itemsep}
	\setlength{\topsep}{-7.5pt}
	\item El usuario selecciona una Propuesta de un Tema.
	\item El usuario introduce el nuevo título y descripción de la Propuesta.
	\item El usuario introduce otros datos específicos para este tipo de decisión.
	\item El sistema valida los datos introducidos.
	\item Ya existe otra Propuesta con ese título en ese tema. Se muestra un mensaje y se vuelven a solicitar los datos.
	\vspace{-4mm}
	\end{enumerate}
	\\
	\hline
\end{tabular}
\caption{Especificación del caso de uso \textit{Modificar decisión - Modificar Propuesta}}
\label{table:flujosEditPropuesta}
\end{table}

En la Figura \ref{fig:analisisModificarpropuestaCliente} se muestra el diagrama de clases de análisis para el subsistema cliente. En la Figura \ref{fig:analisisModificarpropuestaServer} se muestra el diagrama de clases de análisis para el subsistema servidor.

\imagen{Cap5/Cliente2//analisisModificarpropuestaCliente}{2.2}{Diagrama de clases de análisis - Cliente - Modificar Propuesta}{fig:analisisModificarpropuestaCliente}

\imagen{Cap5/Server2//analisisModificarpropuestaServer}{2.2}{Diagrama de clases de análisis - Servidor - Modificar Propuesta}{fig:analisisModificarpropuestaServer}

\subparagraph{Aceptar o rechazar decisión}

Este caso de uso se ha modelado como una extensión al caso de uso anterior, \textit{Modificar Decisión} (ver Figura \ref{fig:CduGestionDecisiones2Server}). Esto es así porque, aunque también es una modificación de una determinada decisión, existen algunas diferencias en el comportamiento con respecto al caso de uso anterior, siguiendo un comportamiento específico. Dichas diferencias consisten en que este caso de uso (sólo disponible para el rol de jefe de proyecto) es independiente del tipo de decisión, y el jefe de proyecto no tiene porqué ser necesariamente el autor de la decisión. 

En la Tabla \ref{table:flujosStatus} se describe el caso de uso \textit{Aceptar o rechazar decisión}.

\begin{table}[!htbp]%
\centering
\begin{tabular}{| >{\arraybackslash}m{15cm} |}
	\hline
	\textbf{Nombre}: Aceptar o rechazar decisión \\
	\hline
	\textbf{Descripción}: Funcionalidad para poder cambiar el estado de una decisión, aceptándola o rechazándola, reflejando este cambio visualmente.	\\
	\hline
	\textbf{Precondiciones}: Que el usuario haya accedido al sistema y tenga permisos para realizar la operación. \\
	\hline
	\textbf{Post-condiciones}: Se cambia el estado de una decisión, a aceptada o rechazada. \\
	\hline 
	\textbf{Flujo principal}:
	\begin{enumerate}
	\vspace{-4mm}
	\setlength{\itemsep}{-7.5pt}
	\setlength{\parsep}{\itemsep}
	\setlength{\partopsep}{\itemsep}
	\setlength{\topsep}{-7.5pt}
	\item El jefe de proyecto selecciona una decisión de las visualizadas.
	\item El jefe de proyecto selecciona un estado (Aceptada/Rechazada) para dicha decisión.
	\item El sistema valida los datos.
	\item Se modifica la decisión.
	\item El sistema crea una notificación para los usuarios dados de alta en el proyecto.
	\item Se refrescan y actualizan las decisiones, para reflejar visualmente el cambio.
	\vspace{-4mm}
	\end{enumerate}
	\\
	\hline
\end{tabular}
\caption{Especificación del caso de uso \textit{Aceptar o rechazar decisión}}
\label{table:flujosStatus}
\end{table}

En este caso, el diagrama de clases de análisis en ambos subsistemas son prácticamente iguales a los diagramas del caso de uso anterior.


\paragraph{Grupo Funcional F3: \textit{Visualización información}}

\subparagraph{Visualizar decisiones}

En la Tabla \ref{table:flujosConsultarDecisiones} se describe el caso de uso \textit{Visualizar decisiones}.

\begin{table}[!htbp]%
\centering
\begin{tabular}{| >{\arraybackslash}m{15cm} |}
	\hline
	\textbf{Nombre}: Visualizar decisiones \\
	\hline
	\textbf{Descripción}: Funcionalidad para visualizar las decisiones (y su información relacionada) de un proyecto. 	\\
	\hline
	\textbf{Precondiciones}: Que el usuario haya accedido al sistema y tenga permisos para realizar la operación. \\
	\hline
	\textbf{Post-condiciones}: Se consultan las decisiones de un proyecto y se visualizan. \\
	\hline 
	\textbf{Flujo principal}:
	\begin{enumerate}
	\vspace{-4mm}
	\setlength{\itemsep}{-7.5pt}
	\setlength{\parsep}{\itemsep}
	\setlength{\partopsep}{\itemsep}
	\setlength{\topsep}{-7.5pt}
	\item El usuario inicia la acción para consultar las decisiones de un proyecto.
	\item El sistema consulta las decisiones del proyecto.
	\item El sistema consulta la información asociada a las decisiones.
	\item Se muestran las decisiones encontradas.
	\item Se muestra información asociada a las decisiones.
	\vspace{-4mm}
	\end{enumerate}
	\\
	\hline
	\textbf{Flujo alternativo 1: no existen decisiones}:
	\begin{enumerate}
	\vspace{-4mm}
	\setlength{\itemsep}{-7.5pt}
	\setlength{\parsep}{\itemsep}
	\setlength{\partopsep}{\itemsep}
	\setlength{\topsep}{-7.5pt}
	\item El usuario inicia la acción para consultar las decisiones de un proyecto.
	\item El sistema consulta las decisiones del proyecto.
	\item Se muestra mensaje de que no hay ninguna decisión.
	\vspace{-4mm}
	\end{enumerate}
	\\
	\hline
\end{tabular}
\caption{Especificación del caso de uso \textit{Visualizar decisiones}}
\label{table:flujosConsultarDecisiones}
\end{table}

La Figura \ref{fig:analisisConsultarDecisionesCliente} representa el diagrama de clases de análisis para el subsistema cliente. En la Figura \ref{fig:analisisConsultarDecisionesServer} se muestra el diagrama de clases de análisis para el subsistema servidor.

\imagen{Cap5/Cliente2//analisisConsultarDecisionesCliente}{2.2}{Diagrama de clases de análisis - Cliente - Visualizar Decisiones}{fig:analisisConsultarDecisionesCliente}

\imagen{Cap5/Server2//analisisConsultarDecisionesServer}{2.2}{Diagrama de clases de análisis - Servidor - Visualizar Decisiones}{fig:analisisConsultarDecisionesServer}


\subparagraph{Visualizar compañía}

En la Tabla \ref{table:flujosConsultarCompañía} se describe el caso de uso \textit{Visualizar compañía}.

\begin{table}[!htbp]%
\centering
\begin{tabular}{| >{\arraybackslash}m{15cm} |}
	\hline
	\textbf{Nombre}: Visualizar compañía \\
	\hline
	\textbf{Descripción}: Funcionalidad para consultar los detalles de una compañía. 	\\
	\hline
	\textbf{Precondiciones}: Que el usuario haya accedido al sistema y tenga permisos para realizar la operación. \\
	\hline
	\textbf{Post-condiciones}: Se consultan los detalles de una compañía y se muestran. \\
	\hline 
	\textbf{Flujo principal}:
	\begin{enumerate}
	\vspace{-4mm}
	\setlength{\itemsep}{-7.5pt}
	\setlength{\parsep}{\itemsep}
	\setlength{\partopsep}{\itemsep}
	\setlength{\topsep}{-7.5pt}
	\item El usuario inicia la acción para consultar los detalles de una compañía y visualizarla.
	\item El sistema consulta los datos de la compañía.
	\item El sistema calcula las coordenadas geográficas de la compañía.
	\item Se muestran los datos de la compañía y se visualiza geoposicionada en un mapa.
	\vspace{-4mm}
	\end{enumerate}
	\\
	\hline
\end{tabular}
\caption{Especificación del caso de uso \textit{Visualizar compañía}}
\label{table:flujosConsultarCompañía}
\end{table}

La Figura \ref{fig:analisisConsultarCompanyiaCliente} representa el diagrama de clases de análisis para el subsistema cliente. En la Figura \ref{fig:analisisConsultarCompanyiaServer} se muestra el diagrama de clases de análisis para el subsistema servidor.

\imagen{Cap5/Cliente2//analisisConsultarCompanyiaCliente}{2.2}{Diagrama de clases de análisis - Cliente - Visualizar compañía}{fig:analisisConsultarCompanyiaCliente}

\imagen{Cap5/Server2//analisisConsultarCompanyiaServer}{2.2}{Diagrama de clases de análisis - Servidor - Visualizar compañía}{fig:analisisConsultarCompanyiaServer}



\paragraph{Grupo Funcional F7: \textit{Generación estadísticas}}

\subparagraph{Generación gráficos estadísticos}

En la Tabla \ref{table:flujosEstadisticas} se describe el caso de uso \textit{Generación gráficos estadísticos}.

\begin{table}[!htbp]%
\centering
\begin{tabular}{| >{\arraybackslash}m{15cm} |}
	\hline
	\textbf{Nombre}: Generación gráficos estadísticos\\
	\hline
	\textbf{Descripción}: Funcionalidad para generar y visualizar un gráfico estadístico.\\
	\hline
	\textbf{Precondiciones}: Que el usuario haya accedido al sistema y tenga permisos para realizar la operación. \\
	\hline
	\textbf{Post-condiciones}: Se genera y visualiza un gráfico estadístico \\
	\hline 
	\textbf{Flujo principal}:
	\begin{enumerate}
	\vspace{-4mm}
	\setlength{\itemsep}{-7.5pt}
	\setlength{\parsep}{\itemsep}
	\setlength{\partopsep}{\itemsep}
	\setlength{\topsep}{-7.5pt}
	\item El jefe de proyecto selecciona un tipo de gráfico a generar.
	\item El generar y visualizar un gráfico estadístico selecciona los datos a usar en ese gráfico.
	\item Se validan los datos introducidos.
	\item El sistema consulta los proyectos y decisiones, según la selección del usuario.
	\item Se procesan los datos consultados.
	\item Se genera la gráfica con los datos procesados.
	\item Se visualiza el gráfico generado.
	\vspace{-4mm}
	\end{enumerate}
	\\
	\hline
	\textbf{Flujo alternativo 1: datos incompletos}:
	\begin{enumerate}
	\vspace{-4mm}
	\setlength{\itemsep}{-7.5pt}
	\setlength{\parsep}{\itemsep}
	\setlength{\partopsep}{\itemsep}
	\setlength{\topsep}{-7.5pt}
	\item El jefe de proyecto selecciona un tipo de gráfico a generar.
	\item El jefe de proyecto selecciona los datos a usar en ese gráfico.
	\item Se validan los datos introducidos.	
	\item Los datos son incompletos. Se muestra un mensaje y se vuelven a solicitar los datos.
	\vspace{-4mm}
	\end{enumerate}	
	\\
	\hline
\end{tabular}
\caption{Especificación del caso de uso \textit{Generación gráfico estadístico}}
\label{table:flujosEstadisticas}
\end{table}

La Figura \ref{fig:analisisEstadisticasCliente} representa el diagrama de clases de análisis para el subsistema cliente. 

\imagen{Cap5/Cliente2//analisisEstadisticasCliente}{2.2}{Diagrama de clases de análisis - Cliente - Generación gráficos estadísticos}{fig:analisisEstadisticasCliente}


\paragraph{Grupo Funcional F9: \textit{Exportar información}}

\subparagraph{Exportar información}

En la Tabla \ref{table:export} se describe el caso de uso \textit{Exportar información}.

\begin{table}[!htbp]%
\centering
\begin{tabular}{| >{\arraybackslash}m{15cm} |}
	\hline
	\textbf{Nombre}: Exportar información\\
	\hline
	\textbf{Descripción}: Funcionalidad para exportar la información de proyectos y sus decisiones a un fichero XML.\\
	\hline
	\textbf{Precondiciones}: Que el usuario haya accedido al sistema y tenga permisos para realizar la operación. \\
	\hline
	\textbf{Post-condiciones}: Se genera y almacena un fichero XML con la información de proyectos y sus decisiones. \\
	\hline 
	\textbf{Flujo principal}:
	\begin{enumerate}
	\vspace{-4mm}
	\setlength{\itemsep}{-7.5pt}
	\setlength{\parsep}{\itemsep}
	\setlength{\partopsep}{\itemsep}
	\setlength{\topsep}{-7.5pt}
	\item El jefe de proyecto inicia la acción de exportar información.	
	\item Se consulta en el sistema los proyectos disponibles.
	\item El jefe de proyecto selecciona un proyecto para exportar la información de ese proyecto.
	\item Se validan los datos introducidos.
	\item El sistema consulta el proyecto seleccionado, sus decisiones y la información asociada a éstas.
	\item Los datos consultados se serializan y se guardan en un fichero XML.
	\vspace{-4mm}
	\end{enumerate}
	\\
	\hline
	\textbf{Flujo alternativo 1: no existen proyectos}:
	\begin{enumerate}
	\vspace{-4mm}
	\setlength{\itemsep}{-7.5pt}
	\setlength{\parsep}{\itemsep}
	\setlength{\partopsep}{\itemsep}
	\setlength{\topsep}{-7.5pt}
	\item El jefe de proyecto inicia la acción de exportar información.	
	\item Se consulta en el sistema los proyectos disponibles.
	\item No existen proyectos. Se muestra mensaje informando de esta situación.
	\vspace{-4mm}
	\end{enumerate}
	\\
	\hline
\end{tabular}
\caption{Especificación del caso de uso \textit{Exportar información}}
\label{table:export}
\end{table}

La Figura \ref{fig:analisisExportarCliente} representa el diagrama de clases de análisis para el subsistema cliente. La Figura \ref{fig:analisisExportarServer} refleja el diagrama de clases de análisis para el subsistema servidor.

\imagen{Cap5/Cliente2//analisisExportarCliente}{2.2}{Diagrama de clases de análisis - Cliente - Exportar información}{fig:analisisExportarCliente}

\imagen{Cap5/Server2//analisisExportarServer}{2.2}{Diagrama de clases de análisis - Servidor - Exportar información}{fig:analisisExportarServer}


Del mismo modo que los anteriores, se detallan los escenarios y se crean sus diagramas de clases de análisis para el resto de los casos de uso modelados con anterioridad.

\subsubsection{Arquitectura del sistema} \label{sec:arquitectura}

Al final de esta primera iteración de la fase de elaboración se define la arquitectura del sistema.

\paragraph{Arquitectura cliente-servidor}

Como se comentó en el apartado \ref{label:reqnofuncionales}, el sistema a desarrollar debe ser distribuido, para poder ser utilizado desde localizaciones diferentes, por lo que se ha decidido utilizar una arquitectura cliente-servidor. De esta forma, el sistema completo se divide en dos subsistemas:

\begin{itemize}
	\item \textbf{Subsistema Cliente}: este subsistema es el utilizado por los miembros de los equipos de desarrollo deslocalizados. Este subsistema es el que se encarga de mostrar la interfaz gráfica de usuario, recoger las acciones que el usuario desea hacer y enviar dicha acción al servidor, esperando su respuesta para actualizar la interfaz gráfica en consecuencia.
	\item \textbf{Subsistema Servidor}: este subsistema se encarga de recibir las peticiones del subsistema cliente, procesarlas, almacenar y recuperar información de su base de datos y enviar la respuesta al cliente. También se encarga de que todas las acciones queden registradas.
\end{itemize}

Así, cada uno de los subsistemas se puede encontrar en máquinas diferentes, pues, siguiendo la
arquitectura cliente-servidor, se comunican a través de \textbf{RMI} (ver sección \ref{sec:marco}). Además,
la base de datos utilizada por el servidor también se pueden encontrar en una máquina
diferente a la máquina donde se encuentre el servidor. 

Por tanto, algunas ventajas de utilizar este enfoque distribuido siguiendo la arquitectura cliente-servidor son:

\begin{itemize}
	\item \textbf{Centralización del control}: toda la lógica de dominio y control está centralizada en el servidor, por lo que el sistema cliente es totalmente independiente de la implementación
del servidor. Del mismo modo, el sistema cliente es independiente de como se realiza la gestión
del conocimiento en el servidor. Además, los accesos, recursos y la integridad de los datos son
controlados por el servidor de forma que un cliente defectuoso o no autorizado no pueda dañar
el sistema.
	\item \textbf{Escalabilidad}: se pueden añadir nuevos tipos de sistemas clientes para que se comuniquen
con el servidor.
	\item \textbf{Fácil mantenimiento}: al estar los sistemas distribuidos en diferentes máquinas, es posible
reemplazar, reparar o actualizar el servidor, mientras que sus clientes no se verán afectados
por ese cambio.
\end{itemize}

En la Figura \ref{fig:despliegue} se muestra una vista de los subsistemas que integran el sistema global y
como se comunican dichos sistemas a través de interfaces, facilitando la distribución de cada uno
de los sistemas en diferentes máquinas. 

\imagen{Cap5/Server2//Despliegue}{2.1}{Arquitectura cliente-servidor}{fig:despliegue}


\paragraph{Arquitectura multicapa}

En cuanto a la arquitectura de implementación, ambos sistemas, cliente y servidor, serán desarrollados siguiendo una arquitectura multicapa, de modo que se pueda aislar la capa de presentación de la de la lógica de dominio y ésta de la capa de persistencia (ver Figura \ref{fig:multicapa}).

\imagenBorde{Cap5//multicapa}{0.4}{Arquitectura multicapa}{fig:multicapa}

De este modo, las capas con las que cuenta cada subsistema son las siguientes:

\begin{itemize}
	\item Cliente: comunicaciones, dominio y presentación.
	\item Servidor: comunicaciones, dominio, persistencia y presentación.
\end{itemize}

Más concretamente, estas capas se traducirán a paquetes de implementación, donde cada uno agrupara los siguientes elementos:

\begin{itemize}
	\item \textbf{Comunicaciones}: contiene las clases e interfaces necesarias para la comunicación de los subsistemas a través de RMI.
	\item \textbf{Dominio}: contiene todos los objetos del dominio de la aplicación.
	\item \textbf{Persistencia}: contiene las clases encargadas de gestionar la persistencia de los objetos de dominio.
	\item \textbf{Presentación}: contiene todas las vistas de la interfaz gráfica de usuario, organizadas en subpaquetes. 
\end{itemize}

En la Figura \ref{fig:paquetes} puede observarse esta arquitectura multicapa y las relaciones entre dichas capas.

\imagen{Cap5/Server2//DivisionCapas}{2.2}{Arquitectura multicapa}{fig:paquetes}

Utilizando este enfoque multicapa, se sigue el principio de mínimo acoplamiento y máxima
cohesión, desacoplando los elementos de una capa de los de otra. De este modo, se facilita el
mantenimiento y extensibilidad del sistema, pues cuando se realice el cambio en algún elemento
de una capa, el resto de capas no se verán afectadas.


\paragraph{Patrones utilizados} 

En cuanto a los patrones de diseño, se han utilizado los siguientes para el desarrollo del sistema:

\begin{itemize}
	\item \textbf{Singleton}: patrón que asegura que para una determinada clase solo exista una única instancia y provee un punto de acceso a ella. Se utiliza para implementar el patrón Agente y para otras clases que deben ser únicas en el sistema.
	\item \textbf{Agente}: patrón utilizado para gestionar acceso y manipulación a ficheros.
	\item \textbf{DAO (Data Access Object)}: patrón que permite separar los objetos de dominio de su persistencia, haciendo independiente cómo se almacenan. Se ha utilizado este patrón para gestionar la persistencia de los objetos de dominio.
	\item \textbf{Observador}: patrón que permite que los cambios sobre un objeto se notifiquen directamente al conjunto de objetos dependientes (observados). Se utiliza para gestionar varias conexiones de bases de datos y para notificar a los clientes cambios que se produzcan en el sistema.
	\item \textbf{Fachada}: patrón que proporciona una interfaz de alto nivel que delega posteriormente en una o varias clases. Se ha utilizado para implementar la interfaz de operaciones del servidor, que el subsistema cliente puede utilizar.
	\item \textbf{Proxy}:	patrón que proporciona el acceso a otro objeto, normalmente remoto. Se ha utilizado para comunicar ambos subsistemas por RMI.
	\item \textbf{Iterator}: patrón que proporciona un mecanismo para acceder y recorrer objetos secuencialmente, sin exponer su representación. Se ha utilizado para recorrer enumeraciones y colecciones.
\end{itemize}

